<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>TT Quick Replies - P√°gina de Prueba</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 90%;
            height: 200px;
            margin-bottom: 20px;
            font-size: 15px;
            padding: 10px;
        }
        #repliesPanel {
            width: 420px;
            max-height: 70vh;
            overflow-y: auto;
            background: #f7f7f7;
            border-radius: 10px;
            padding: 10px;
            position: fixed;
            bottom: 90px;
            right: 20px;
            display: none;
            z-index: 10001;
        }
        #toggleButton {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #232f3e;
            color: #fff;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10000;
        }
        button.replyButton {
            width: 100%;
            margin-bottom: 6px;
        }
        input#search {
            width: 100%;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>

<h2>TT Quick Replies - P√°gina de Prueba</h2>
<p>√Årea de prueba: aqu√≠ se insertar√°n las respuestas.</p>
<textarea id="testArea" placeholder="üß™ √Årea de prueba ‚Äì aqu√≠ se insertan las respuestas"></textarea>

<!-- Bot√≥n para abrir el panel -->
<div id="toggleButton">üì¨</div>

<!-- Panel de respuestas -->
<div id="repliesPanel">
    <input type="text" id="search" placeholder="Buscar respuesta...">
    <div id="repliesContainer"></div>
</div>

<!-- Cargar tu script -->
<script src="tt_quick_replies_5_4.user.js"></script>

<script>
    // ================== Panel y √°rea de prueba ==================
    const textarea = document.getElementById('testArea');
    const toggle = document.getElementById('toggleButton');
    const panel = document.getElementById('repliesPanel');
    const search = document.getElementById('search');
    const container = document.getElementById('repliesContainer');

    // Si tu script define 'replies', lo usamos
    function renderReplies(filter = '') {
        container.innerHTML = '';
        if (typeof replies === 'undefined') return; // evitar error si no est√° definido
        replies
            .filter(r => r.key.toLowerCase().includes(filter.toLowerCase()))
            .forEach(r => {
                const b = document.createElement('button');
                b.textContent = r.key;
                b.className = 'replyButton';
                b.onclick = () => {
                    textarea.value = r.text;
                };
                container.appendChild(b);
            });
    }

    renderReplies();

    search.oninput = () => renderReplies(search.value);

    toggle.onclick = () => {
        panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
    };
</script>

</body>
</html>
