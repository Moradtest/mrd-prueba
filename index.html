<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>TT Quick Replies - PÃ¡gina de prueba</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
    #textarea { width: 90%; height: 180px; margin: 20px 0; font-size: 15px; }
    #toggleBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #232f3e;
      color: #fff;
      font-size: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10000;
    }
    #panel {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 420px;
      max-height: 70vh;
      overflow-y: auto;
      background: #fff;
      border-radius: 10px;
      padding: 10px;
      display: none;
      z-index: 10001;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    #search { width: 100%; margin-bottom: 8px; padding: 5px; }
    .replyBtn { width: 100%; margin-bottom: 6px; padding: 5px; cursor: pointer; }
  </style>
</head>
<body>

<h1>TT Quick Replies - PÃ¡gina de prueba</h1>
<textarea id="textarea" placeholder="ðŸ§ª Ãrea de prueba â€“ aquÃ­ se insertan las respuestas"></textarea>

<div id="toggleBtn">ðŸ“¬</div>

<div id="panel">
  <input type="text" id="search" placeholder="Buscar respuesta...">
  <div id="container"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const textarea = document.getElementById('textarea');
  const toggleBtn = document.getElementById('toggleBtn');
  const panel = document.getElementById('panel');
  const searchInput = document.getElementById('search');
  const container = document.getElementById('container');

  let replies = [];

  // Cargar JSON de respuestas
  fetch('replies.json')
    .then(res => res.json())
    .then(data => {
      replies = data;
      renderReplies();
    })
    .catch(err => console.error('Error cargando replies.json:', err));

  function setValue(el, value) {
    el.value = value;
    el.dispatchEvent(new Event('input', { bubbles: true }));
  }

  function renderReplies(filter = '') {
    container.innerHTML = '';
    replies
      .filter(r => r.key.toLowerCase().includes(filter.toLowerCase()))
      .forEach(r => {
        const btn = document.createElement('button');
        btn.textContent = r.key;
        btn.className = 'replyBtn';
        btn.onclick = () => setValue(textarea, r.text);
        container.appendChild(btn);
      });
  }

  searchInput.addEventListener('input', () => renderReplies(searchInput.value));

  toggleBtn.onclick = () => {
    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
  };
});
</script>

</body>
</html>
